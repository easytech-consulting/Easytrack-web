<!DOCTYPE html>
<!--
* easytrak - Application pour la gestion de stock
* @version 1.0.0
* @link https://github.com/estelle97/Easytrak
* Copyright 2020 easytech
* Licensed under MIT (https://easytrak.com/license)
-->
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Easytrak - Application pour la gestion de stock</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <meta name="msapplication-TileColor" content="#206bc4" />
    <meta name="theme-color" content="#206bc4" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="robots" content="noindex,nofollow,noarchive" />
    <link rel="icon" href="../../assets/static/favicon.png" type="image/png" />
    <link rel="shortcut icon" href="../../assets/static/favicon.png" type="image/png" />
    <!-- CSS files -->
    <link href="../../assets/dist/libs/jqvmap/dist/jqvmap.min.css" rel="stylesheet" />
    <link href="../../assets/dist/css/easytrak.min.css" rel="stylesheet" />
    <link href="../../assets/dist/css/demo.min.css" rel="stylesheet" />
    <link href="../../assets/dist/css/custom.css" rel="stylesheet" />
    <style>
        body {
            display: none;
        }
        .ui-menu {
            position: absolute !important;
            width: 49.5% !important;
            top: 40% !important;
            left: 350px;
            z-index: 1060 !important;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 7px;
            background-color: white;
            /* box-shadow: none; */
            -webkit-box-shadow: 0px 10px 16px 0px rgba(0,0,0,0.08);
            -moz-box-shadow: 0px 10px 16px 0px rgba(0,0,0,0.08);
            box-shadow: 0px 10px 16px 0px rgba(0,0,0,0.08);
        }
        .ui-menu-item {
            color: rgba(0,0,0,0.7) !important;
            padding: 1rem 1.5rem !important;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        .ui-menu-item:last-child {
            border-bottom: none;
        }
    </style>

    <link href="../../assets/dist/libs/selectize/dist/css/selectize.css" rel="stylesheet" />

    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="http://salepropos.com/public/vendor/bootstrap-toggle/css/bootstrap-toggle.min.css" type="text/css">
    <link rel="stylesheet" href="http://salepropos.com/public/vendor/bootstrap/css/bootstrap-datepicker.min.css" type="text/css">
    <link rel="stylesheet" href="http://salepropos.com/public/vendor/jquery-timepicker/jquery.timepicker.min.css" type="text/css">
    <link rel="stylesheet" href="http://salepropos.com/public/vendor/bootstrap/css/awesome-bootstrap-checkbox.css" type="text/css">
    <link rel="stylesheet" href="http://salepropos.com/public/vendor/bootstrap/css/bootstrap-select.min.css" type="text/css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="http://salepropos.com/public/vendor/font-awesome/css/font-awesome.min.css" type="text/css">
    <!-- Drip icon font-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/dripicons@2.0.0/webfont/style.css" type="text/css">
    <!-- jQuery Circle-->
    <link rel="stylesheet" href="http://salepropos.com/public/css/grasp_mobile_progress_circle-1.0.0.min.css"
        type="text/css">
    <!-- Custom Scrollbar-->
    <link rel="stylesheet"
        href="http://salepropos.com/public/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css"
        type="text/css">
    <!-- virtual keybord stylesheet-->
    <link rel="stylesheet" href="http://salepropos.com/public/vendor/keyboard/css/keyboard.css" type="text/css">
    <!-- date range stylesheet-->
    <link rel="stylesheet" href="http://salepropos.com/public/vendor/daterange/css/daterangepicker.min.css"
        type="text/css">

    <!-- table sorter stylesheet-->
    <link rel="stylesheet" type="text/css" href="http://salepropos.com/public/vendor/datatable/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/fixedheader/3.1.6/css/fixedHeader.bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap.min.css">
    <link rel="stylesheet" href="http://salepropos.com/public/css/dropzone.css">
    <link rel="stylesheet" href="http://salepropos.com/public/css/style.css">

    <script type="text/javascript" src="http://salepropos.com/public/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/jquery/jquery-ui.min.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/jquery/bootstrap-datepicker.min.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/jquery/jquery.timepicker.min.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/popper.js/umd/popper.min.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript"
        src="http://salepropos.com/public/vendor/bootstrap-toggle/js/bootstrap-toggle.min.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/bootstrap/js/bootstrap-select.min.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/keyboard/js/jquery.keyboard.js"></script>
    <script type="text/javascript"
        src="http://salepropos.com/public/vendor/keyboard/js/jquery.keyboard.extension-autocomplete.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/js/grasp_mobile_progress_circle-1.0.0.min.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/jquery.cookie/jquery.cookie.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/chart.js/Chart.min.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/jquery-validation/jquery.validate.min.js">
    </script>
    <script type="text/javascript"
        src="http://salepropos.com/public/vendor/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/js/charts-custom.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/daterange/js/moment.min.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/daterange/js/knockout-3.4.2.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/daterange/js/daterangepicker.min.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/tinymce/js/tinymce/tinymce.min.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/js/dropzone.js"></script>

    <!-- table sorter js-->
    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/pdfmake.min.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/vfs_fonts.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/jquery.dataTables.min.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/dataTables.bootstrap4.min.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/dataTables.buttons.min.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/buttons.bootstrap4.min.js">
    </script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/buttons.colVis.min.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/buttons.html5.min.js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/buttons.print.min.js"></script>

    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/sum().js"></script>
    <script type="text/javascript" src="http://salepropos.com/public/vendor/datatable/dataTables.checkboxes.min.js">
    </script>
    <script type="text/javascript" src="https://cdn.datatables.net/fixedheader/3.1.6/js/dataTables.fixedHeader.min.js">
    </script>
    <script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js">
    </script>
    <script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap.min.js">
    </script>
</head>

<body class="antialiased">
    <div class="page">
        <header class="navbar navbar-expand-md navbar-dark navbar-bg-gradient navbar-overlap">
            <div class="container-xl">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <a href="." class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pr-0 pr-md-3">
                    <img src="../../assets/static/logo-white.svg" alt="easytrak" class="navbar-brand-image" />
                </a>
                <div class="navbar-nav flex-row order-md-last">
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link d-flex lh-1 text-reset p-0" data-toggle="dropdown">
                            <span class="avatar"
                                style="background-image: url('https://ui-avatars.com/api/?name=Estelle+Belinga&background=FFFFFF&color=267FC9&font-size=0.30');">
                                <span class="badge bg-red"></span>
                            </span>
                            <div class="d-none d-xl-block pl-2">
                                <div>Astride</div>
                                <div class="mt-1 small text-muted">
                                    Admin
                                </div>
                            </div>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item" href="./profile.html">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                                    class="icon dropdown-item-icon">
                                    <path fill="none" d="M0 0h24v24H0z" />
                                    <path
                                        d="M12 17c3.662 0 6.865 1.575 8.607 3.925l-1.842.871C17.347 20.116 14.847 19 12 19c-2.847 0-5.347 1.116-6.765 2.796l-1.841-.872C5.136 18.574 8.338 17 12 17zm0-15a5 5 0 0 1 5 5v3a5 5 0 0 1-4.783 4.995L12 15a5 5 0 0 1-5-5V7a5 5 0 0 1 4.783-4.995L12 2zm0 2a3 3 0 0 0-2.995 2.824L9 7v3a3 3 0 0 0 5.995.176L15 10V7a3 3 0 0 0-3-3z" />
                                </svg>
                                Mon profile
                            </a>
                            <a class="dropdown-item" href="./agenda.html">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                                    class="icon dropdown-item-icon">
                                    <path fill="none" d="M0 0h24v24H0z" />
                                    <path
                                        d="M17 3h4a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h4V1h2v2h6V1h2v2zm-2 2H9v2H7V5H4v4h16V5h-3v2h-2V5zm5 6H4v8h16v-8z" />
                                </svg>
                                Agenda
                            </a>
                            <a class="dropdown-item" href="./notifications.html">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                                    class="icon dropdown-item-icon">
                                    <path fill="none" d="M0 0h24v24H0z" />
                                    <path
                                        d="M5 18h14v-6.969C19 7.148 15.866 4 12 4s-7 3.148-7 7.031V18zm7-16c4.97 0 9 4.043 9 9.031V20H3v-8.969C3 6.043 7.03 2 12 2zM9.5 21h5a2.5 2.5 0 1 1-5 0z" />
                                </svg>
                                Notifications
                            </a>
                            <a class="dropdown-item" href="./chat.html">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                                    class="icon dropdown-item-icon">
                                    <path fill="none" d="M0 0h24v24H0z" />
                                    <path
                                        d="M10 3h4a8 8 0 1 1 0 16v3.5c-5-2-12-5-12-11.5a8 8 0 0 1 8-8zm2 14h2a6 6 0 1 0 0-12h-4a6 6 0 0 0-6 6c0 3.61 2.462 5.966 8 8.48V17z" />
                                </svg>
                                Chat
                            </a>
                            <a class="dropdown-item" href="./help.html">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                                    class="icon dropdown-item-icon">
                                    <path fill="none" d="M0 0h24v24H0z" />
                                    <path
                                        d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355z" />
                                </svg>
                                Aide
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                                    class="icon dropdown-item-icon">
                                    <path fill="none" d="M0 0h24v24H0z" />
                                    <path
                                        d="M4 18h2v2h12V4H6v2H4V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3zm2-7h7v2H6v3l-5-4 5-4v3z" />
                                </svg>
                                Se déconnecter</a>
                        </div>
                    </div>
                </div>
                <div class="collapse navbar-collapse" id="navbar-menu">
                    <div class="d-flex flex-column flex-md-row flex-fill align-items-stretch align-items-md-center">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="./index.html">
                                    <span class="nav-link-icon d-md-none d-lg-inline-block">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24" class="icon">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M21 20a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V9.49a1 1 0 0 1 .386-.79l8-6.222a1 1 0 0 1 1.228 0l8 6.222a1 1 0 0 1 .386.79V20zm-2-1V9.978l-7-5.444-7 5.444V19h14z"
                                                fill="rgba(255,255,255,0.8)" /></svg>
                                    </span>
                                    <span class="nav-link-title">
                                        Accueil
                                    </span>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#navbar-layout" data-toggle="dropdown"
                                    role="button" aria-expanded="false">
                                    <span class="nav-link-icon d-md-none d-lg-inline-block">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24" class="icon">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M6.5 2h11a1 1 0 0 1 .8.4L21 6v15a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6l2.7-3.6a1 1 0 0 1 .8-.4zM19 8H5v12h14V8zm-.5-2L17 4H7L5.5 6h13zM9 10v2a3 3 0 0 0 6 0v-2h2v2a5 5 0 0 1-10 0v-2h2z"
                                                fill="rgba(255,255,255,0.8)" />
                                        </svg>
                                    </span>
                                    <span class="nav-link-title">
                                        Sites
                                    </span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li class="active">
                                        <a class="dropdown-item" href="./products.html">
                                            Produits
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="./suppliers.html">
                                            Fournisseurs
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="./sites.html">
                                            Gérer les sites
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown active">
                                <a class="nav-link dropdown-toggle" href="#navbar-layout" data-toggle="dropdown"
                                    role="button" aria-expanded="false">
                                    <span class="nav-link-icon d-md-none d-lg-inline-block">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24" class="icon">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M4 16V4H2V2h3a1 1 0 0 1 1 1v12h12.438l2-8H8V5h13.72a1 1 0 0 1 .97 1.243l-2.5 10a1 1 0 0 1-.97.757H5a1 1 0 0 1-1-1zm2 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm12 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"
                                                fill="rgba(255,255,255,0.8)" />
                                        </svg>
                                    </span>
                                    <span class="nav-link-title">
                                        Commandes
                                    </span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li class="active">
                                        <a class="dropdown-item" href="./salesorders.html">
                                            Commandes clients
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="./purchaseorders.html">
                                            Bons de commandes
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="./invoices.html">
                                    <span class="nav-link-icon d-md-none d-lg-inline-block">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24" class="icon">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M21 8v12.993A1 1 0 0 1 20.007 22H3.993A.993.993 0 0 1 3 21.008V2.992C3 2.455 3.449 2 4.002 2h10.995L21 8zm-2 1h-5V4H5v16h14V9z"
                                                fill="rgba(255,255,255,0.8)" />
                                        </svg>
                                    </span>
                                    <span class="nav-link-title">
                                        Facturations
                                    </span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="./users.html">
                                    <span class="nav-link-icon d-md-none d-lg-inline-block">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24" class="icon">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M2 22a8 8 0 1 1 16 0h-2a6 6 0 1 0-12 0H2zm8-9c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6zm0-2c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm8.284 3.703A8.002 8.002 0 0 1 23 22h-2a6.001 6.001 0 0 0-3.537-5.473l.82-1.824zm-.688-11.29A5.5 5.5 0 0 1 21 8.5a5.499 5.499 0 0 1-5 5.478v-2.013a3.5 3.5 0 0 0 1.041-6.609l.555-1.943z"
                                                fill="rgba(255,255,255,0.8)" />
                                        </svg>
                                    </span>
                                    <span class="nav-link-title">
                                        Utilisateurs
                                    </span>
                                </a>
                            </li>
                        </ul>
                        <div
                            class="ml-md-auto pl-md-4 py-2 py-md-0 mr-md-4 order-first order-md-last flex-grow-1 flex-md-grow-0">
                            <form action="." method="get">
                                <div class="input-icon">
                                    <span class="input-icon-addon">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                            viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" />
                                            <circle cx="10" cy="10" r="7" />
                                            <line x1="21" y1="21" x2="15" y2="15" />
                                        </svg>
                                    </span>
                                    <input type="text" class="form-control form-control-rounded form-control-dark"
                                        placeholder="Search…" />
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <div class="content">
            <div class="container-xl">
                <!-- Page title -->
                <div class="page-header text-white">
                    <div class="row align-items-center">
                        <div class="col-auto">
                            <h2 class="page-title">
                                Bon de commandes
                            </h2>
                        </div>
                        <div class="col-auto">
                            <div class="text-white text-h5 mt-2">
                                1-10 of 30
                            </div>
                        </div>
                        <!-- Page title actions -->
                        <div class="col-auto ml-auto d-print-none">
                            <div class="d-flex align-items-center">
                                <a href="#" class="btn btn-white" data-toggle="modal"
                                    data-target="#modal-create-purchaseorder">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                        viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                        stroke-linecap="round" stroke-linejoin="round">
                                        <path stroke="none" d="M0 0h24v24H0z" />
                                        <line x1="12" y1="5" x2="12" y2="19" />
                                        <line x1="5" y1="12" x2="19" y2="12" />
                                    </svg>
                                    Nouveau
                                </a>
                                <span class="dropdown ml-3">
                                    <div class="dropdown-toggle" data-boundary="viewport" data-toggle="dropdown">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24"
                                            height="24">
                                            <path fill="none" d="M0 0h24v24H0z" />
                                            <path
                                                d="M2 18h7v2H2v-2zm0-7h9v2H2v-2zm0-7h20v2H2V4zm18.674 9.025l1.156-.391 1 1.732-.916.805a4.017 4.017 0 0 1 0 1.658l.916.805-1 1.732-1.156-.391c-.41.37-.898.655-1.435.83L19 21h-2l-.24-1.196a3.996 3.996 0 0 1-1.434-.83l-1.156.392-1-1.732.916-.805a4.017 4.017 0 0 1 0-1.658l-.916-.805 1-1.732 1.156.391c.41-.37.898-.655 1.435-.83L17 11h2l.24 1.196c.536.174 1.024.46 1.434.83zM18 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"
                                                fill="rgba(255,255,255,1)" /></svg>
                                    </div>

                                    <div class="dropdown-menu dropdown-menu-right mt-3">
                                        <span class="dropdown-header">Trier par</span>
                                        <a class="dropdown-item" href="#">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18"
                                                height="18" class="mr-2">
                                                <path fill="none" d="M0 0h24v24H0z" />
                                                <path
                                                    d="M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z" />
                                            </svg>
                                            Nom
                                        </a>
                                        <a class="dropdown-item" href="#">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18"
                                                height="18" class="mr-2">
                                                <path fill="none" d="M0 0h24v24H0z" />
                                                <path
                                                    d="M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z" />
                                            </svg>
                                            Fournisseur
                                        </a>
                                        <a class="dropdown-item" href="#">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18"
                                                height="18" class="mr-2">
                                                <path fill="none" d="M0 0h24v24H0z" />
                                                <path
                                                    d="M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z" />
                                            </svg>
                                            Quantité
                                        </a>
                                        <a class="dropdown-item" href="#">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18"
                                                height="18" class="mr-2">
                                                <path fill="none" d="M0 0h24v24H0z" />
                                                <path
                                                    d="M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z" />
                                            </svg>
                                            Date
                                        </a>
                                        <div class="dropdown-divider"></div>
                                        <a class="dropdown-item" href="#">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18"
                                                height="18" class="mr-2">
                                                <path fill="none" d="M0 0h24v24H0z" />
                                                <path
                                                    d="M5.463 4.433A9.961 9.961 0 0 1 12 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 0 0 6.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0 0 13.54 5.772l.997 1.795z" />
                                            </svg>
                                            Actualiser
                                        </a>
                                    </div>
                                </span>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-9">
                        <div class="card">
                            <div class="table-responsive">
                                <table class="table table-vcenter card-table">
                                    <thead>
                                        <tr>
                                            <th class="w-1"><input class="form-check-input m-0 align-middle"
                                                    type="checkbox"></th>
                                            <th class="w-1">No.
                                            </th>
                                            <th>Date</th>
                                            <th>Produit</th>
                                            <th>Forunisseur</th>
                                            <th>Quantité</th>
                                            <th>PU</th>
                                            <th>Total</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><input class="form-check-input m-0 align-middle" type="checkbox"
                                                    aria-label="Select invoice"></td>
                                            <td><span class="text-muted">001401</span></td>
                                            <td><a href="invoice.html" class="text-reset" tabindex="-1">20-06-2020</a>
                                            </td>
                                            <td>
                                                Guinness Smooth
                                            </td>
                                            <td>
                                                Mbarga Zoua
                                            </td>
                                            <td>
                                                50
                                            </td>
                                            <td>
                                                500
                                            </td>
                                            <td>
                                                2500
                                            </td>
                                            <td class="text-right">
                                                <span class="dropdown">
                                                    <button class="btn btn-white btn-sm dropdown-toggle align-text-top"
                                                        data-boundary="viewport" data-toggle="dropdown">Actions</button>
                                                    <div class="dropdown-menu dropdown-menu-right">
                                                        <a class="dropdown-item" href="#">
                                                            Modifier
                                                        </a>
                                                        <a class="dropdown-item" href="#">
                                                            Dupiquer
                                                        </a>
                                                        <a class="dropdown-item" href="#">
                                                            Marquer comme inactif
                                                        </a>
                                                        <div class="dropdown-divider"></div>
                                                        <a class="dropdown-item" href="#">
                                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                                                width="18" height="18" class="mr-2">
                                                                <path fill="none" d="M0 0h24v24H0z" />
                                                                <path
                                                                    d="M7 4V2h10v2h5v2h-2v15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V6H2V4h5zM6 6v14h12V6H6zm3 3h2v8H9V9zm4 0h2v8h-2V9z" />
                                                            </svg>
                                                            Supprimer
                                                        </a>
                                                    </div>
                                                </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="card-footer d-flex align-items-center">
                                <p class="m-0 text-muted">Affichage <span>1</span> à <span>10</span> de <span>30</span>
                                    élements</p>
                                <ul class="pagination m-0 ml-auto">
                                    <li class="page-item disabled">
                                        <a class="page-link" href="#" tabindex="-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                                viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                                stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" />
                                                <polyline points="15 6 9 12 15 18" /></svg>
                                            précédent
                                        </a>
                                    </li>
                                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                                    <li class="page-item active"><a class="page-link" href="#">2</a></li>
                                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                                    <li class="page-item"><a class="page-link" href="#">4</a></li>
                                    <li class="page-item"><a class="page-link" href="#">5</a></li>
                                    <li class="page-item">
                                        <a class="page-link" href="#">
                                            suivant <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24"
                                                height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"
                                                fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" />
                                                <polyline points="9 6 15 12 9 18" /></svg>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="card col-lg-3 p-3" style="max-height: 600px;">
                        <div class="row">

                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer footer-transparent">
                <div class="container">
                    <div class="row text-center align-items-center flex-row-reverse">
                        <div class="col-lg-auto ml-lg-auto">
                            <ul class="list-inline list-inline-dots mb-0">
                                <li class="list-inline-item">
                                    <a href="" class="link-secondary">Aide</a>
                                </li>
                                <li class="list-inline-item">
                                    <a href="./terms-of-service.html" class="link-secondary">Conditions
                                        d'utilisation</a>
                                </li>
                                <li class="list-inline-item">
                                    <a href="" class="link-secondary">Licence</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                            Copyright © 2020
                            <a href="." class="link-secondary">Easytrak</a>.
                            Tous droits réservés.
                        </div>
                    </div>
                </div>
            </footer>
        </div>
        <div class="modal-section">
            <div class="modal modal-blur fade" id="modal-create-purchaseorder" tabindex="-1" role="dialog"
                aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Passer une commande</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" />
                                    <line x1="18" y1="6" x2="6" y2="18" />
                                    <line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                        <div class="modal-body bg-white">
                            <section class="forms pos-section">
                                <div class="row">
                                    <audio id="mysoundclip1" preload="auto">
                                        <source src="http://salepropos.com/public/beep/beep-timber.mp3">
                                        </source>
                                    </audio>
                                    <audio id="mysoundclip2" preload="auto">
                                        <source src="http://salepropos.com/public/beep/beep-07.mp3">
                                        </source>
                                    </audio>
                                    <div class="col-md-12">
                                        <div class="card border-0 p-0">
                                            <div class="card-body p-0">
                                                <form class="payment-form">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="row d-flex justify-content-around">
                                                                <div class="col-md-12 mb-4">
                                                                    <div class="search-box input-icon">
                                                                        <input type="text" class="form-control"
                                                                            name="product_code_name"
                                                                            id="lims_productcodeSearch"
                                                                            placeholder="Rechercher un produit">
                                                                        <span class="input-icon-addon">
                                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                                class="icon" width="24" height="24"
                                                                                viewBox="0 0 24 24" stroke-width="2"
                                                                                stroke="currentColor" fill="none"
                                                                                stroke-linecap="round"
                                                                                stroke-linejoin="round">
                                                                                <path stroke="none" d="M0 0h24v24H0z">
                                                                                </path>
                                                                                <circle cx="10" cy="10" r="7"></circle>
                                                                                <line x1="21" y1="21" x2="15" y2="15">
                                                                                </line>
                                                                            </svg>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="table-responsive transaction-list">
                                                                    <table id="myTable"
                                                                        class="table table-hover table-striped order-list table-fixed">
                                                                        <thead>
                                                                            <tr>
                                                                                <th class="col-sm-4">Produit</th>
                                                                                <th class="col-sm-2">Prix</th>
                                                                                <th class="col-sm-3">Quantité</th>
                                                                                <th class="col-sm-3">SubTotal</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="display: none;">
                                                                <div class="col-md-2">
                                                                    <div class="form-group">
                                                                        <input type="hidden" name="total_qty" />
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-2">
                                                                    <div class="form-group">
                                                                        <input type="hidden" name="total_discount"
                                                                            value="0.00" />
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-2">
                                                                    <div class="form-group">
                                                                        <input type="hidden" name="total_tax"
                                                                            value="0.00" />
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-2">
                                                                    <div class="form-group">
                                                                        <input type="hidden" name="total_price" />
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-2">
                                                                    <div class="form-group">
                                                                        <input type="hidden" name="item" />
                                                                        <input type="hidden" name="order_tax" />
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-2">
                                                                    <div class="form-group">
                                                                        <input type="hidden" name="grand_total" />
                                                                        <input type="hidden" name="coupon_discount" />
                                                                        <input type="hidden" name="sale_status"
                                                                            value="1" />
                                                                        <input type="hidden" name="coupon_active">
                                                                        <input type="hidden" name="coupon_id">
                                                                        <input type="hidden" name="coupon_discount" />

                                                                        <input type="hidden" name="pos" value="1" />
                                                                        <input type="hidden" name="draft" value="0" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-12 totals"
                                                                style="border-top: 2px solid #e4e6fc; padding-top: 10px;">
                                                                <div class="row">
                                                                    <div class="col-sm-4">
                                                                        <span class="totals-title">Items</span><span
                                                                            id="item">0</span>
                                                                    </div>
                                                                    <div class="col-sm-4">
                                                                        <span class="totals-title">Total</span><span
                                                                            id="subtotal">0.00</span>
                                                                    </div>
                                                                    <div class="col-sm-4">
                                                                        <span class="totals-title">Discount <button
                                                                                type="button"
                                                                                class="btn btn-link btn-sm"
                                                                                data-toggle="modal"
                                                                                data-target="#order-discount"> <i
                                                                                    class="dripicons-document-edit"></i></button></span><span
                                                                            id="discount">0.00</span>
                                                                    </div>
                                                                    <div class="col-sm-4">
                                                                        <span class="totals-title">Coupon <button
                                                                                type="button"
                                                                                class="btn btn-link btn-sm"
                                                                                data-toggle="modal"
                                                                                data-target="#coupon-modal"><i
                                                                                    class="dripicons-document-edit"></i></button></span><span
                                                                            id="coupon-text">0.00</span>
                                                                    </div>
                                                                    <div class="col-sm-4">
                                                                        <span class="totals-title">Tax <button
                                                                                type="button"
                                                                                class="btn btn-link btn-sm"
                                                                                data-toggle="modal"
                                                                                data-target="#order-tax"><i
                                                                                    class="dripicons-document-edit"></i></button></span><span
                                                                            id="tax">0.00</span>
                                                                    </div>
                                                                    <div class="col-sm-4">
                                                                        <span class="totals-title">Shipping <button
                                                                                type="button"
                                                                                class="btn btn-link btn-sm"
                                                                                data-toggle="modal"
                                                                                data-target="#shipping-cost-modal"><i
                                                                                    class="dripicons-document-edit"></i></button></span><span
                                                                            id="shipping-cost">0.00</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="payment-amount text-right">
                                                <h2>Grand Total <span id="grand-total">0.00</span></h2>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- product edit modal -->
                                    <div id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                                        aria-hidden="true" class="modal fade text-left">
                                        <div role="document" class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 id="modal_header" class="modal-title"></h5>
                                                    <button type="button" data-dismiss="modal" aria-label="Close"
                                                        class="close"><span aria-hidden="true"><i
                                                                class="dripicons-cross"></i></span></button>
                                                </div>
                                                <div class="modal-body">
                                                    <form>
                                                        <div class="form-group">
                                                            <label>Quantity</label>
                                                            <input type="text" name="edit_qty"
                                                                class="form-control numkey">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Unit Discount</label>
                                                            <input type="text" name="edit_discount"
                                                                class="form-control numkey">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Unit Price</label>
                                                            <input type="text" name="edit_unit_price"
                                                                class="form-control numkey" step="any">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Tax Rate</label>
                                                            <select name="edit_tax_rate"
                                                                class="form-control selectpicker">
                                                                <option value="0">No Tax</option>
                                                                <option value="1">vat@10</option>
                                                                <option value="2">vat@15</option>
                                                                <option value="3">vat 20</option>
                                                            </select>
                                                        </div>
                                                        <div id="edit_unit" class="form-group">
                                                            <label>Product Unit</label>
                                                            <select name="edit_unit" class="form-control selectpicker">
                                                            </select>
                                                        </div>
                                                        <button type="button" name="update_btn"
                                                            class="btn btn-primary">Update</button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" style="width: 100%;" data-dismiss="modal">
                                Enregistrer
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal modal-blur fade" id="modal-delete-purchaseorder" tabindex="-1" role="dialog"
                aria-hidden="true">
                <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <div class="modal-title">Êtes vous sure ?</div>
                            <div>
                                Si vous continuez, vous perdrez toutes les
                                données de cette commande.
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-link link-secondary mr-auto" data-dismiss="modal">
                                Annuler
                            </button>
                            <button type="button" class="btn btn-danger" data-dismiss="modal">
                                Oui, supprimer
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Libs JS -->
    <script src="../../assets/dist/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/dist/libs/selectize/dist/js/standalone/selectize.min.js"></script>
    <!-- easytrak Core -->
    <script src="../../assets/dist/js/easytrak.min.js"></script>

    <script>
        document.body.style.display = "block";

    </script>

    <script type="text/javascript">
        $("ul#sale").siblings('a').attr('aria-expanded', 'true');
        $("ul#sale").addClass("show");
        $("ul#sale #sale-pos-menu").addClass("active");


        // $( document ).ready(function() {
        //     $("#lims_productcodeSearch").focus();
        // });

        var public_key = "pk_test_ITN7KOYiIsHSCQ0UMRcgaYUB";
        var valid;

        // array data depend on warehouse
        var products = [{
                "id": "5f26e7f6efd18e14893776e8",
                "cost": 902543,
                "price": 740640,
                "qty": 175,
                "qty_alert": 20,
                "active": false,
                "created_at": "02/08/2020",
                "product": {
                    "id": "5f26e7f6c348196b6b0667dc",
                    "name": "Oneal",
                    "code": 5020,
                    "description": "Tropoli",
                    "brand": "Brasserie du cameroun",
                    "active": true,
                    "type": "boisson",
                    "barcode_symbology": "c3807c31-5794-4413-8735-71249597959a",
                    "photo": "",
                    "created_at": "02/08/2020",
                    "deleted_at": ""
                }
            },
            {
                "id": "5f26e7f624ca65c7f0a493b1",
                "cost": 154731,
                "price": 483461,
                "qty": 944,
                "qty_alert": 23,
                "active": true,
                "created_at": "02/08/2020",
                "product": {
                    "id": "5f26e7f63e169d2c1342a811",
                    "name": "Bean",
                    "code": 6344,
                    "description": "Dognost",
                    "brand": "Brasserie du cameroun",
                    "active": true,
                    "type": "boisson",
                    "barcode_symbology": "9a4953fa-63a1-4ad2-b4bb-24eb57991023",
                    "photo": "",
                    "created_at": "02/08/2020",
                    "deleted_at": ""
                }
            },
            {
                "id": "5f26e7f6915c0a117ad224d9",
                "cost": 34870,
                "price": 800242,
                "qty": 241,
                "qty_alert": 21,
                "active": false,
                "created_at": "02/08/2020",
                "product": {
                    "id": "5f26e7f62dfa6ddd5698f5e8",
                    "name": "Johns",
                    "code": 1685,
                    "description": "Dadabase",
                    "brand": "Brasserie du cameroun",
                    "active": false,
                    "type": "boisson",
                    "barcode_symbology": "289582e3-1500-43f9-a03e-fe775b8b8185",
                    "photo": "",
                    "created_at": "02/08/2020",
                    "deleted_at": ""
                }
            },
            {
                "id": "5f26e7f6c51c0569f7ab4a35",
                "cost": 622237,
                "price": 440638,
                "qty": 150,
                "qty_alert": 20,
                "active": false,
                "created_at": "02/08/2020",
                "product": {
                    "id": "5f26e7f6442769c487e5f6b7",
                    "name": "Burt",
                    "code": 9675,
                    "description": "Renovize",
                    "brand": "Brasserie du cameroun",
                    "active": false,
                    "type": "boisson",
                    "barcode_symbology": "86db5bb0-8bbd-4a4a-928d-3ec9623a131c",
                    "photo": "",
                    "created_at": "02/08/2020",
                    "deleted_at": ""
                }
            },
            {
                "id": "5f26e7f691f69dc5a0358864",
                "cost": 441521,
                "price": 54694,
                "qty": 928,
                "qty_alert": 24,
                "active": false,
                "created_at": "02/08/2020",
                "product": {
                    "id": "5f26e7f619f8df40f489870a",
                    "name": "Franco",
                    "code": 1281,
                    "description": "Plasmox",
                    "brand": "Brasserie du cameroun",
                    "active": false,
                    "type": "boisson",
                    "barcode_symbology": "4aff0a25-7bc0-4a7d-93d2-546c06690461",
                    "photo": "",
                    "created_at": "02/08/2020",
                    "deleted_at": ""
                }
            },
            {
                "id": "5f26e7f64eaff04c6c0890c9",
                "cost": 796409,
                "price": 494198,
                "qty": 730,
                "qty_alert": 23,
                "active": true,
                "created_at": "02/08/2020",
                "product": {
                    "id": "5f26e7f6b6b5375d7f38bdea",
                    "name": "Mitchell",
                    "code": 2897,
                    "description": "Eargo",
                    "brand": "Brasserie du cameroun",
                    "active": false,
                    "type": "boisson",
                    "barcode_symbology": "f7d992c2-fc67-491b-966d-de882b4f67aa",
                    "photo": "",
                    "created_at": "02/08/2020",
                    "deleted_at": ""
                }
            },
            {
                "id": "5f26e7f6423f10f6c08bc772",
                "cost": 128777,
                "price": 865383,
                "qty": 837,
                "qty_alert": 25,
                "active": false,
                "created_at": "02/08/2020",
                "product": {
                    "id": "5f26e7f61cb225ad5ed55a8b",
                    "name": "Calhoun",
                    "code": 2303,
                    "description": "Keeg",
                    "brand": "Brasserie du cameroun",
                    "active": true,
                    "type": "boisson",
                    "barcode_symbology": "a0ba476b-2dd0-465e-966d-388fdf6b95ab",
                    "photo": "",
                    "created_at": "02/08/2020",
                    "deleted_at": ""
                }
            },
            {
                "id": "5f26e7f63a987aa8a51107f1",
                "cost": 445905,
                "price": 124185,
                "qty": 545,
                "qty_alert": 20,
                "active": false,
                "created_at": "02/08/2020",
                "product": {
                    "id": "5f26e7f61fd4f1db58a67307",
                    "name": "Church",
                    "code": 6207,
                    "description": "Cubix",
                    "brand": "Brasserie du cameroun",
                    "active": true,
                    "type": "boisson",
                    "barcode_symbology": "3968c2b1-d9bb-4e67-8a1c-b1b9999e17f0",
                    "photo": "",
                    "created_at": "02/08/2020",
                    "deleted_at": ""
                }
            },
            {
                "id": "5f26e7f64c64423f27073852",
                "cost": 191525,
                "price": 653845,
                "qty": 30,
                "qty_alert": 23,
                "active": true,
                "created_at": "02/08/2020",
                "product": {
                    "id": "5f26e7f6e4add7cbaaba8a02",
                    "name": "Armstrong",
                    "code": 7776,
                    "description": "Kiosk",
                    "brand": "Brasserie du cameroun",
                    "active": false,
                    "type": "boisson",
                    "barcode_symbology": "556229fd-a278-49eb-9f46-a82716d147e8",
                    "photo": "",
                    "created_at": "02/08/2020",
                    "deleted_at": ""
                }
            }
        ];
        var lims_product_array = [];
        var product_code = [];
        var product_name = [];
        var product_qty = [];
        var product_type = [];
        var product_id = [];
        var product_list = [];
        var qty_list = [];

        // array data with selection
        var product_price = [];
        var product_discount = [];
        var tax_rate = [];
        var tax_name = [];
        var tax_method = [];
        var unit_name = [];
        var unit_operator = [];
        var unit_operation_value = [];
        var gift_card_amount = [];
        var gift_card_expense = [];

        // temporary array
        var temp_unit_name = [];
        var temp_unit_operator = [];
        var temp_unit_operation_value = [];

        var deposit = {
            "1": 170,
            "2": 80,
            "3": 0,
            "11": 0
        };
        var product_row_number = "4";
        var rowindex;
        var customer_group_rate;
        var row_product_price;
        var pos;
        var keyboard_active = "0";
        var role_id = "1";
        var warehouse_id = null;
        var biller_id = null;
        var coupon_list = [{
            "id": 1,
            "code": "sonar bangla",
            "type": "percentage",
            "amount": "20",
            "minimum_amount": "0",
            "quantity": "100",
            "used": "3",
            "expired_date": "2020-03-31",
            "user_id": "1",
            "is_active": "1",
            "created_at": "2018-10-25 17:38:50",
            "updated_at": "2020-03-11 05:46:41"
        }, {
            "id": 2,
            "code": "i love bangladesh",
            "type": "fixed",
            "amount": "200",
            "minimum_amount": "1000",
            "quantity": "50",
            "used": "1",
            "expired_date": "2018-12-31",
            "user_id": "1",
            "is_active": "1",
            "created_at": "2018-10-26 21:59:26",
            "updated_at": "2019-03-01 23:46:48"
        }];
        var currency = "BDT";

        $('.selectpicker').selectpicker({
            style: 'btn-link',
        });

        if (keyboard_active == 1) {

            $("input.numkey:text").keyboard({
                usePreview: false,
                layout: 'custom',
                display: {
                    'accept': '&#10004;',
                    'cancel': '&#10006;'
                },
                customLayout: {
                    'normal': ['1 2 3', '4 5 6', '7 8 9', '0 {dec} {bksp}', '{clear} {cancel} {accept}']
                },
                restrictInput: true, // Prevent keys not in the displayed keyboard from being typed in
                preventPaste: true, // prevent ctrl-v and right click
                autoAccept: true,
                css: {
                    // input & preview
                    // keyboard container
                    container: 'center-block dropdown-menu', // jumbotron
                    // default state
                    buttonDefault: 'btn btn-default',
                    // hovered button
                    buttonHover: 'btn-primary',
                    // Action keys (e.g. Accept, Cancel, Tab, etc);
                    // this replaces "actionClass" option
                    buttonAction: 'active'
                },
            });

            $('input[type="text"]').keyboard({
                usePreview: false,
                autoAccept: true,
                autoAcceptOnEsc: true,
                css: {
                    // input & preview
                    // keyboard container
                    container: 'center-block dropdown-menu', // jumbotron
                    // default state
                    buttonDefault: 'btn btn-default',
                    // hovered button
                    buttonHover: 'btn-primary',
                    // Action keys (e.g. Accept, Cancel, Tab, etc);
                    // this replaces "actionClass" option
                    buttonAction: 'active',
                    // used when disabling the decimal button {dec}
                    // when a decimal exists in the input area
                    buttonDisabled: 'disabled'
                },
                change: function (e, keyboard) {
                    keyboard.$el.val(keyboard.$preview.val())
                    keyboard.$el.trigger('propertychange')
                }
            });

            $('textarea').keyboard({
                usePreview: false,
                autoAccept: true,
                autoAcceptOnEsc: true,
                css: {
                    // input & preview
                    // keyboard container
                    container: 'center-block dropdown-menu', // jumbotron
                    // default state
                    buttonDefault: 'btn btn-default',
                    // hovered button
                    buttonHover: 'btn-primary',
                    // Action keys (e.g. Accept, Cancel, Tab, etc);
                    // this replaces "actionClass" option
                    buttonAction: 'active',
                    // used when disabling the decimal button {dec}
                    // when a decimal exists in the input area
                    buttonDisabled: 'disabled'
                },
                change: function (e, keyboard) {
                    keyboard.$el.val(keyboard.$preview.val())
                    keyboard.$el.trigger('propertychange')
                }
            });

            $('#lims_productcodeSearch').keyboard().autocomplete().addAutocomplete({
                // add autocomplete window positioning
                // options here (using position utility)
                position: {
                    of: '#lims_productcodeSearch',
                    my: 'right top',
                    at: 'center bottom',
                    collision: 'flip'
                }
            });
        }

        if (role_id > 2) {
            $('#biller_id').addClass('d-none');
            $('#warehouse_id').addClass('d-none');
            $('select[name=warehouse_id]').val(warehouse_id);
            $('select[name=biller_id]').val(biller_id);
        } else {
            $('select[name=warehouse_id]').val($("input[name='warehouse_id_hidden']").val());
            $('select[name=biller_id]').val($("input[name='biller_id_hidden']").val());
        }

        $('select[name=customer_id]').val($("input[name='customer_id_hidden']").val());
        $('.selectpicker').selectpicker('refresh');

        products.forEach(data => {
            // lims_product_array = [];
            product_code.push(data.product.code);
            product_name.push(data.product.name);
            product_qty.push(data.qty);
            product_type.push(data.product.type);
            product_id.push(data.product.id);
            product_list.push(data.product);
            qty_list.push(data.qty);
            lims_product_array.push(`#${data.product.code} - ${data.product.name}`);
        });
        console.log("product_code", product_code);
        console.log("product_name", product_name);
        console.log("product_qty", product_qty);
        console.log("product_type", product_type);
        console.log("product_id", product_id);
        console.log("qty_list", qty_list);
        console.log("product_list", product_list);
        console.log("lims_product_array", lims_product_array);

        /* if (keyboard_active == 1) {
            $('#lims_productcodeSearch').bind('keyboardChange', function (e, keyboard, el) {
                var customer_id = $('#customer_id').val();
                var warehouse_id = $('select[name="warehouse_id"]').val();
                temp_data = $('#lims_productcodeSearch').val();
                if (!customer_id) {
                    $('#lims_productcodeSearch').val(temp_data.substring(0, temp_data.length - 1));
                    alert('Please select Customer!');
                } else if (!warehouse_id) {
                    $('#lims_productcodeSearch').val(temp_data.substring(0, temp_data.length - 1));
                    alert('Please select Warehouse!');
                }
            });
        } else {
            $('#lims_productcodeSearch').on('input', function () {
                var customer_id = $('#customer_id').val();
                var warehouse_id = $('#warehouse_id').val();
                temp_data = $('#lims_productcodeSearch').val();
                if (!customer_id) {
                    $('#lims_productcodeSearch').val(temp_data.substring(0, temp_data.length - 1));
                    alert('Please select Customer!');
                } else if (!warehouse_id) {
                    $('#lims_productcodeSearch').val(temp_data.substring(0, temp_data.length - 1));
                    alert('Please select Warehouse!');
                }

            });
        } */

        $('body').on('click', function (e) {
            $('.filter-window').hide('slide', {
                direction: 'right'
            }, 'fast');
        });

        $('#category-filter').on('click', function (e) {
            e.stopPropagation();
            $('.filter-window').show('slide', {
                direction: 'right'
            }, 'fast');
            $('.category').show();
            $('.brand').hide();
        });

        $('.category-img').on('click', function () {
            var category_id = $(this).data('category');
            var brand_id = 0;

            $(".table-container").children().remove();
            $.get('sales/getproduct/' + category_id + '/' + brand_id, function (data) {
                populateProduct(data);
            });
        });

        $('#brand-filter').on('click', function (e) {
            e.stopPropagation();
            $('.filter-window').show('slide', {
                direction: 'right'
            }, 'fast');
            $('.brand').show();
            $('.category').hide();
        });

        $('.brand-img').on('click', function () {
            var brand_id = $(this).data('brand');
            var category_id = 0;

            $(".table-container").children().remove();
            $.get('sales/getproduct/' + category_id + '/' + brand_id, function (data) {
                populateProduct(data);
            });
        });

        $('#featured-filter').on('click', function () {
            $(".table-container").children().remove();
            $.get('sales/getfeatured', function (data) {
                populateProduct(data);
            });
        });

        function populateProduct(data) {
            var tableData =
                '<table id="product-table" class="table no-shadow product-list"> <thead class="d-none"> <tr> <th></th> <th></th> <th></th> <th></th> <th></th> </tr></thead> <tbody><tr>';

            if (Object.keys(data).length != 0) {
                $.each(data['name'], function (index) {
                    var product_info = data['code'][index] + ' (' + data['name'][index] + ')';
                    if (index % 5 == 0 && index != 0)
                        tableData += '</tr><tr><td class="product-img sound-btn" title="' + data['name'][
                            index
                        ] + '" data-product = "' + product_info + '"><img  src="public/images/product/' +
                        data['image'][index] + '" width="100%" /><p>' + data['name'][index] + '</p><span>' +
                        data['code'][index] + '</span></td>';
                    else
                        tableData += '<td class="product-img sound-btn" title="' + data['name'][index] +
                        '" data-product = "' + product_info + '"><img  src="public/images/product/' + data[
                            'image'][index] + '" width="100%" /><p>' + data['name'][index] + '</p><span>' +
                        data['code'][index] + '</span></td>';
                });

                if (data['name'].length % 5) {
                    var number = 5 - (data['name'].length % 5);
                    while (number > 0) {
                        tableData += '<td style="border:none;"></td>';
                        number--;
                    }
                }

                tableData += '</tr></tbody></table>';
                $(".table-container").html(tableData);
                $('#product-table').DataTable({
                    "order": [],
                    'pageLength': product_row_number,
                    'language': {
                        'paginate': {
                            'previous': '<i class="fa fa-angle-left"></i>',
                            'next': '<i class="fa fa-angle-right"></i>'
                        }
                    },
                    dom: 'tp'
                });
                $('table.product-list').hide();
                $('table.product-list').show(500);
            } else {
                tableData += '<td class="text-center">No data avaialable</td></tr></tbody></table>'
                $(".table-container").html(tableData);
            }
        }

        var lims_productcodeSearch = $('#lims_productcodeSearch');

        lims_productcodeSearch.autocomplete({
            source: function (request, response) {
                console.log("source_request", request)
                var matcher = new RegExp(".?" + $.ui.autocomplete.escapeRegex(request.term), "i");
                response($.grep(lims_product_array, function (item) {
                    return matcher.test(item);
                }));
            },
            response: function (event, ui) {
                console.log("response_ui", ui)
                if (ui.content.length == 1) {
                    var data = ui.content[0].value;
                    $(this).autocomplete("close");
                    productSearch(data);
                };
            },
            select: function (event, ui) {
                console.log("select_event", event)
                var data = ui.item.value;
                productSearch(data);
            },
        });

        $('#myTable').keyboard({
            accepted: function (event, keyboard, el) {
                checkQuantity(el.value, true);
            }
        });

        $("#myTable").on('click', '.plus', function () {
            rowindex = $(this).closest('tr').index();
            var qty = parseFloat($('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ') .qty').val()) +
                1;
            $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ') .qty').val(qty);
            checkQuantity(String(qty), true);
        });

        $("#myTable").on('click', '.minus', function () {
            rowindex = $(this).closest('tr').index();
            var qty = parseFloat($('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ') .qty').val()) -
                1;
            if (qty > 0) {
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ') .qty').val(qty);
            } else {
                qty = 1;
            }
            checkQuantity(String(qty), true);
        });

        //Change quantity
        $("#myTable").on('input', '.qty', function () {
            rowindex = $(this).closest('tr').index();
            if ($(this).val() < 1 && $(this).val() != '') {
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ') .qty').val(1);
                alert("Quantity can't be less than 1");
            }
            checkQuantity($(this).val(), true);
        });

        $("#myTable").on('click', '.qty', function () {
            rowindex = $(this).closest('tr').index();
        });

        $(document).on('click', '.sound-btn', function () {
            var audio = $("#mysoundclip1")[0];
            audio.play();
        });

        $(document).on('click', '.product-img', function () {
            var customer_id = $('#customer_id').val();
            var warehouse_id = $('select[name="warehouse_id"]').val();
            if (!customer_id)
                alert('Please select Customer!');
            else if (!warehouse_id)
                alert('Please select Warehouse!');
            else {
                var data = $(this).data('product');
                data = data.split(" ");
                pos = product_code.indexOf(data[0]);
                if (pos < 0)
                    alert('Product is not avaialable in the selected warehouse');
                else {
                    productSearch(data[0]);
                }
            }
        });
        //Delete product
        $("table.order-list tbody").on("click", ".ibtnDel", function (event) {
            var audio = $("#mysoundclip2")[0];
            audio.play();
            rowindex = $(this).closest('tr').index();
            product_price.splice(rowindex, 1);
            product_discount.splice(rowindex, 1);
            tax_rate.splice(rowindex, 1);
            tax_name.splice(rowindex, 1);
            tax_method.splice(rowindex, 1);
            unit_name.splice(rowindex, 1);
            unit_operator.splice(rowindex, 1);
            unit_operation_value.splice(rowindex, 1);
            $(this).closest("tr").remove();
            calculateTotal();
        });

        //Edit product
        $("table.order-list").on("click", ".edit-product", function () {
            rowindex = $(this).closest('tr').index();
            edit();
        });

        //Update product
        $('button[name="update_btn"]').on("click", function () {
            var edit_discount = $('input[name="edit_discount"]').val();
            var edit_qty = $('input[name="edit_qty"]').val();
            var edit_unit_price = $('input[name="edit_unit_price"]').val();

            if (parseFloat(edit_discount) > parseFloat(edit_unit_price)) {
                alert('Invalid Discount Input!');
                return;
            }

            if (edit_qty < 1) {
                $('input[name="edit_qty"]').val(1);
                edit_qty = 1;
                alert("Quantity can't be less than 1");
            }

            var tax_rate_all = [0, "10", "15", "20"];

            tax_rate[rowindex] = parseFloat(tax_rate_all[$('select[name="edit_tax_rate"]').val()]);
            tax_name[rowindex] = $('select[name="edit_tax_rate"] option:selected').text();

            product_discount[rowindex] = $('input[name="edit_discount"]').val();
            if (product_type[pos] == 'standard') {
                var row_unit_operator = unit_operator[rowindex].slice(0, unit_operator[rowindex].indexOf(","));
                var row_unit_operation_value = unit_operation_value[rowindex].slice(0, unit_operation_value[
                    rowindex].indexOf(","));
                if (row_unit_operator == '*') {
                    product_price[rowindex] = $('input[name="edit_unit_price"]').val() /
                        row_unit_operation_value;
                } else {
                    product_price[rowindex] = $('input[name="edit_unit_price"]').val() *
                        row_unit_operation_value;
                }
                var position = $('select[name="edit_unit"]').val();
                var temp_operator = temp_unit_operator[position];
                var temp_operation_value = temp_unit_operation_value[position];
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.sale-unit').val(
                    temp_unit_name[position]);
                temp_unit_name.splice(position, 1);
                temp_unit_operator.splice(position, 1);
                temp_unit_operation_value.splice(position, 1);

                temp_unit_name.unshift($('select[name="edit_unit"] option:selected').text());
                temp_unit_operator.unshift(temp_operator);
                temp_unit_operation_value.unshift(temp_operation_value);

                unit_name[rowindex] = temp_unit_name.toString() + ',';
                unit_operator[rowindex] = temp_unit_operator.toString() + ',';
                unit_operation_value[rowindex] = temp_unit_operation_value.toString() + ',';
            }
            checkQuantity(edit_qty, false);
        });

        $('button[name="order_discount_btn"]').on("click", function () {
            calculateGrandTotal();
        });

        $('button[name="shipping_cost_btn"]').on("click", function () {
            calculateGrandTotal();
        });

        $('button[name="order_tax_btn"]').on("click", function () {
            calculateGrandTotal();
        });

        $(".coupon-check").on("click", function () {
            couponDiscount();
        });

        $(".payment-btn").on("click", function () {
            var audio = $("#mysoundclip2")[0];
            audio.play();
            $('input[name="paid_amount"]').val($("#grand-total").text());
            $('input[name="paying_amount"]').val($("#grand-total").text());
            $('.qc').data('initial', 1);
        });

        $("#draft-btn").on("click", function () {
            var audio = $("#mysoundclip2")[0];
            audio.play();
            $('input[name="sale_status"]').val(3);
            $('input[name="paying_amount"]').prop('required', false);
            $('input[name="paid_amount"]').prop('required', false);
            var rownumber = $('table.order-list tbody tr:last').index();
            if (rownumber < 0) {
                alert("Please insert product to order table!")
            } else
                $('.payment-form').submit();
        });

        $('select[name="paid_by_id_select"]').on("change", function () {
            var id = $(this).val();
            $(".payment-form").off("submit");
            if (id == 2) {
                $('div.qc').hide();
                giftCard();
            } else if (id == 3) {
                $('div.qc').hide();
                creditCard();
            } else if (id == 4) {
                $('div.qc').hide();
                cheque();
            } else {
                hide();
                if (id == 1)
                    $('div.qc').show();
                else if (id == 6) {
                    $('div.qc').hide();
                    deposits();
                }
            }
        });

        $('#add-payment select[name="gift_card_id_select"]').on("change", function () {
            var balance = gift_card_amount[$(this).val()] - gift_card_expense[$(this).val()];
            $('#add-payment input[name="gift_card_id"]').val($(this).val());
            if ($('input[name="paid_amount"]').val() > balance) {
                alert('Amount exceeds card balance! Gift Card balance: ' + balance);
            }
        });

        $('#add-payment input[name="paying_amount"]').on("input", function () {
            change($(this).val(), $('input[name="paid_amount"]').val());
        });

        $('input[name="paid_amount"]').on("input", function () {
            if ($(this).val() > parseFloat($('input[name="paying_amount"]').val())) {
                alert('Paying amount cannot be bigger than recieved amount');
                $(this).val('');
            } else if ($(this).val() > parseFloat($('#grand-total').text())) {
                alert('Paying amount cannot be bigger than grand total');
                $(this).val('');
            }

            change($('input[name="paying_amount"]').val(), $(this).val());
            var id = $('select[name="paid_by_id_select"]').val();
            if (id == 2) {
                var balance = gift_card_amount[$("#gift_card_id_select").val()] - gift_card_expense[$(
                    "#gift_card_id_select").val()];
                if ($(this).val() > balance)
                    alert('Amount exceeds card balance! Gift Card balance: ' + balance);
            } else if (id == 6) {
                if ($('input[name="paid_amount"]').val() > deposit[$('#customer_id').val()])
                    alert('Amount exceeds customer deposit! Customer deposit : ' + deposit[$('#customer_id')
                        .val()]);
            }
        });

        $('.transaction-btn-plus').on("click", function () {
            $(this).addClass('d-none');
            $('.transaction-btn-close').removeClass('d-none');
        });

        $('.transaction-btn-close').on("click", function () {
            $(this).addClass('d-none');
            $('.transaction-btn-plus').removeClass('d-none');
        });

        $('.coupon-btn-plus').on("click", function () {
            $(this).addClass('d-none');
            $('.coupon-btn-close').removeClass('d-none');
        });

        $('.coupon-btn-close').on("click", function () {
            $(this).addClass('d-none');
            $('.coupon-btn-plus').removeClass('d-none');
        });

        $(document).on('click', '.qc-btn', function (e) {
            if ($(this).data('amount')) {
                if ($('.qc').data('initial')) {
                    $('input[name="paying_amount"]').val($(this).data('amount').toFixed(2));
                    $('.qc').data('initial', 0);
                } else {
                    $('input[name="paying_amount"]').val((parseFloat($('input[name="paying_amount"]').val()) +
                        $(this).data('amount')).toFixed(2));
                }
            } else
                $('input[name="paying_amount"]').val('0.00');
            change($('input[name="paying_amount"]').val(), $('input[name="paid_amount"]').val());
        });

        function change(paying_amount, paid_amount) {
            $("#change").text(parseFloat(paying_amount - paid_amount).toFixed(2));
        }

        function confirmDelete() {
            if (confirm("Are you sure want to delete?")) {
                return true;
            }
            return false;
        }

        function checkProducts(item) {
            for (var key in products) {
                if (item[key] === undefined || item[key] != filter[key])
                    return false;
            }
            return true;
        }

        function productSearch(searchdata) {
            console.log("productSearch -> data", searchdata);
            console.log("productSearch -> products", products)
            var data = products.filter(checkProducts);
            var flag = 1;
            $(".product-code").each(function (i) {
                if ($(this).val() == data[1]) {
                    rowindex = i;
                    var pre_qty = $('table.order-list tbody tr:nth-child(' + (rowindex +
                        1) + ') .qty').val();
                    if (pre_qty)
                        var qty = parseFloat(pre_qty) + 1;
                    else
                        var qty = 1;
                    $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ') .qty')
                        .val(qty);
                    flag = 0;
                    checkQuantity(String(qty), true);
                    flag = 0;
                }
            });
            $("input[name='product_code_name']").val('');
            if (flag) {
                console.log("productSearch -> flag", flag)
                addNewProduct(data);
            }
        }

        function addNewProduct(data) {
            var newRow = $("<tr>");
            var cols = '';
            temp_unit_name = (data[6]).split(',');
            cols +=
                '<td class="col-sm-4 product-title"><button type="button" class="edit-product btn btn-link" data-toggle="modal" data-target="#editModal"><strong>' +
                data[0] + '</strong></button> [' + data[1] + '] </td>';
            cols += '<td class="col-sm-2 product-price"></td>';
            cols +=
                '<td class="col-sm-3"><div class="input-group"><span class="input-group-btn"><button type="button" class="btn btn-default minus"><span class="dripicons-minus"></span></button></span><input type="text" name="qty[]" class="form-control qty numkey input-number" value="1" step="any" required><span class="input-group-btn"><button type="button" class="btn btn-default plus"><span class="dripicons-plus"></span></button></span></div></td>';
            cols += '<td class="col-sm-2 sub-total"></td>';
            cols +=
                '<td class="col-sm-1"><button type="button" class="ibtnDel btn btn-danger btn-sm"><i class="dripicons-cross"></i></button></td>';
            cols += '<input type="hidden" class="product-code" name="product_code[]" value="' + data[1] + '"/>';
            cols += '<input type="hidden" class="product-id" name="product_id[]" value="' + data[9] + '"/>';
            cols += '<input type="hidden" class="sale-unit" name="sale_unit[]" value="' + temp_unit_name[0] + '"/>';
            cols += '<input type="hidden" class="net_unit_price" name="net_unit_price[]" />';
            cols += '<input type="hidden" class="discount-value" name="discount[]" />';
            cols += '<input type="hidden" class="tax-rate" name="tax_rate[]" value="' + data[3] + '"/>';
            cols += '<input type="hidden" class="tax-value" name="tax[]" />';
            cols += '<input type="hidden" class="subtotal-value" name="subtotal[]" />';

            newRow.append(cols);
            if (keyboard_active == 1) {
                $("table.order-list tbody").append(newRow).find('.qty').keyboard({
                    usePreview: false,
                    layout: 'custom',
                    display: {
                        'accept': '&#10004;',
                        'cancel': '&#10006;'
                    },
                    customLayout: {
                        'normal': ['1 2 3', '4 5 6', '7 8 9', '0 {dec} {bksp}', '{clear} {cancel} {accept}']
                    },
                    restrictInput: true,
                    preventPaste: true,
                    autoAccept: true,
                    css: {
                        container: 'center-block dropdown-menu',
                        buttonDefault: 'btn btn-default',
                        buttonHover: 'btn-primary',
                        buttonAction: 'active',
                        buttonDisabled: 'disabled'
                    },
                });
            } else
                $("table.order-list tbody").append(newRow);

            product_price.push(parseFloat(data[2]) + parseFloat(data[2]));
            product_discount.push('0.00');
            tax_rate.push(parseFloat(data[3]));
            tax_name.push(data[4]);
            tax_method.push(data[5]);
            unit_name.push(data[6]);
            unit_operator.push(data[7]);
            unit_operation_value.push(data[8]);
            rowindex = newRow.index();
            checkQuantity(1, true);
        }

        function edit() {
            var row_product_name_code = $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find(
                'td:nth-child(1)').text();
            $('#modal_header').text(row_product_name_code);

            var qty = $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.qty').val();
            $('input[name="edit_qty"]').val(qty);

            $('input[name="edit_discount"]').val(parseFloat(product_discount[rowindex]).toFixed(2));

            var tax_name_all = ["No Tax", "vat@10", "vat@15", "vat 20"];
            pos = tax_name_all.indexOf(tax_name[rowindex]);
            $('select[name="edit_tax_rate"]').val(pos);

            var row_product_code = $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find(
                '.product-code').val();
            pos = product_code.indexOf(row_product_code);
            if (product_type[pos] == 'standard') {
                unitConversion();
                temp_unit_name = (unit_name[rowindex]).split(',');
                temp_unit_name.pop();
                temp_unit_operator = (unit_operator[rowindex]).split(',');
                temp_unit_operator.pop();
                temp_unit_operation_value = (unit_operation_value[rowindex]).split(',');
                temp_unit_operation_value.pop();
                $('select[name="edit_unit"]').empty();
                $.each(temp_unit_name, function (key, value) {
                    $('select[name="edit_unit"]').append('<option value="' + key + '">' + value + '</option>');
                });
                $("#edit_unit").show();
            } else {
                row_product_price = product_price[rowindex];
                $("#edit_unit").hide();
            }
            $('input[name="edit_unit_price"]').val(row_product_price.toFixed(2));
            $('.selectpicker').selectpicker('refresh');
        }

        function couponDiscount() {
            var rownumber = $('table.order-list tbody tr:last').index();
            if (rownumber < 0) {
                alert("Please insert product to order table!")
            } else if ($("#coupon-code").val() != '') {
                valid = 0;
                $.each(coupon_list, function (key, value) {
                    if ($("#coupon-code").val() == value['code']) {
                        valid = 1;
                        todyDate = "2020-08-02";
                        if (parseFloat(value['quantity']) <= parseFloat(value['used']))
                            alert('This Coupon is no longer available');
                        else if (todyDate > value['expired_date'])
                            alert('This Coupon has expired!');
                        else if (value['type'] == 'fixed') {
                            if (parseFloat($('input[name="grand_total"]').val()) >= value['minimum_amount']) {
                                $('input[name="grand_total"]').val($('input[name="grand_total"]').val() - value[
                                    'amount']);
                                $('#grand-total').text(parseFloat($('input[name="grand_total"]').val()).toFixed(
                                    2));
                                if (!$('input[name="coupon_active"]').val())
                                    alert('Congratulation! You got ' + value['amount'] + ' ' + currency +
                                        ' discount');
                                $(".coupon-check").prop("disabled", true);
                                $("#coupon-code").prop("disabled", true);
                                $('input[name="coupon_active"]').val(1);
                                $("#coupon-modal").modal('hide');
                                $('input[name="coupon_id"]').val(value['id']);
                                $('input[name="coupon_discount"]').val(value['amount']);
                                $('#coupon-text').text(parseFloat(value['amount']).toFixed(2));
                            } else
                                alert('Grand Total is not sufficient for discount! Required ' + value[
                                    'minimum_amount'] + ' ' + currency);
                        } else {
                            var grand_total = $('input[name="grand_total"]').val();
                            var coupon_discount = grand_total * (value['amount'] / 100);
                            grand_total = grand_total - coupon_discount;
                            $('input[name="grand_total"]').val(grand_total);
                            $('#grand-total').text(parseFloat(grand_total).toFixed(2));
                            if (!$('input[name="coupon_active"]').val())
                                alert('Congratulation! You got ' + value['amount'] + '% discount');
                            $(".coupon-check").prop("disabled", true);
                            $("#coupon-code").prop("disabled", true);
                            $('input[name="coupon_active"]').val(1);
                            $("#coupon-modal").modal('hide');
                            $('input[name="coupon_id"]').val(value['id']);
                            $('input[name="coupon_discount"]').val(coupon_discount);
                            $('#coupon-text').text(parseFloat(coupon_discount).toFixed(2));
                        }
                    }
                });
                if (!valid)
                    alert('Invalid coupon code!');
            }
        }

        function checkQuantity(sale_qty, flag) {
            var row_product_code = $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find(
                '.product-code').val();
            pos = product_code.indexOf(row_product_code);
            if (product_type[pos] == 'standard') {
                var operator = unit_operator[rowindex].split(',');
                var operation_value = unit_operation_value[rowindex].split(',');
                if (operator[0] == '*')
                    total_qty = sale_qty * operation_value[0];
                else if (operator[0] == '/')
                    total_qty = sale_qty / operation_value[0];
                if (total_qty > parseFloat(product_qty[pos])) {
                    alert('Quantity exceeds stock quantity!');
                    if (flag) {
                        sale_qty = sale_qty.substring(0, sale_qty.length - 1);
                        $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.qty').val(sale_qty);
                        checkQuantity(sale_qty, true);
                    } else {
                        edit();
                        return;
                    }
                }
            } else if (product_type[pos] == 'combo') {
                child_id = product_list[pos].split(',');
                child_qty = qty_list[pos].split(',');
                $(child_id).each(function (index) {
                    var position = product_id.indexOf(parseInt(child_id[index]));
                    if (parseFloat(sale_qty * child_qty[index]) > product_qty[position]) {
                        alert('Quantity exceeds stock quantity!');
                        if (flag) {
                            sale_qty = sale_qty.substring(0, sale_qty.length - 1);
                            $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.qty').val(
                                sale_qty);
                        } else {
                            edit();
                            flag = true;
                            return false;
                        }
                    }
                });
            }

            if (!flag) {
                $('#editModal').modal('hide');
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.qty').val(sale_qty);
            }
            calculateRowProductData(sale_qty);

        }

        function calculateRowProductData(quantity) {
            if (product_type[pos] == 'standard')
                unitConversion();
            else
                row_product_price = product_price[rowindex];

            $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.discount-value').val((
                product_discount[rowindex] * quantity).toFixed(2));
            $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.tax-rate').val(tax_rate[rowindex]
                .toFixed(2));

            if (tax_method[rowindex] == 1) {
                var net_unit_price = row_product_price - product_discount[rowindex];
                var tax = net_unit_price * quantity * (tax_rate[rowindex] / 100);
                var sub_total = (net_unit_price * quantity) + tax;

                if (parseFloat(quantity))
                    var sub_total_unit = sub_total / quantity;
                else
                    var sub_total_unit = sub_total;

                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.net_unit_price').val(
                    net_unit_price.toFixed(2));
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.tax-value').val(tax.toFixed(2));
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('td:nth-child(2)').text(
                    sub_total_unit.toFixed(2));
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('td:nth-child(4)').text(sub_total
                    .toFixed(2));
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.subtotal-value').val(sub_total
                    .toFixed(2));
            } else {
                var sub_total_unit = row_product_price - product_discount[rowindex];
                var net_unit_price = (100 / (100 + tax_rate[rowindex])) * sub_total_unit;
                var tax = (sub_total_unit - net_unit_price) * quantity;
                var sub_total = sub_total_unit * quantity;

                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.net_unit_price').val(
                    net_unit_price.toFixed(2));
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.tax-value').val(tax.toFixed(2));
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('td:nth-child(2)').text(
                    sub_total_unit.toFixed(2));
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('td:nth-child(4)').text(sub_total
                    .toFixed(2));
                $('table.order-list tbody tr:nth-child(' + (rowindex + 1) + ')').find('.subtotal-value').val(sub_total
                    .toFixed(2));
            }

            calculateTotal();
        }

        function unitConversion() {
            var row_unit_operator = unit_operator[rowindex].slice(0, unit_operator[rowindex].indexOf(","));
            var row_unit_operation_value = unit_operation_value[rowindex].slice(0, unit_operation_value[rowindex]
                .indexOf(","));

            if (row_unit_operator == '*') {
                row_product_price = product_price[rowindex] * row_unit_operation_value;
            } else {
                row_product_price = product_price[rowindex] / row_unit_operation_value;
            }
        }

        function calculateTotal() {
            //Sum of quantity
            var total_qty = 0;
            $("table.order-list tbody .qty").each(function (index) {
                if ($(this).val() == '') {
                    total_qty += 0;
                } else {
                    total_qty += parseFloat($(this).val());
                }
            });
            $('input[name="total_qty"]').val(total_qty);

            //Sum of discount
            var total_discount = 0;
            $("table.order-list tbody .discount-value").each(function () {
                total_discount += parseFloat($(this).val());
            });

            $('input[name="total_discount"]').val(total_discount.toFixed(2));

            //Sum of tax
            var total_tax = 0;
            $(".tax-value").each(function () {
                total_tax += parseFloat($(this).val());
            });

            $('input[name="total_tax"]').val(total_tax.toFixed(2));

            //Sum of subtotal
            var total = 0;
            $(".sub-total").each(function () {
                total += parseFloat($(this).text());
            });
            $('input[name="total_price"]').val(total.toFixed(2));

            calculateGrandTotal();
        }

        function calculateGrandTotal() {
            var item = $('table.order-list tbody tr:last').index();
            var total_qty = parseFloat($('input[name="total_qty"]').val());
            var subtotal = parseFloat($('input[name="total_price"]').val());
            var order_tax = parseFloat($('select[name="order_tax_rate_select"]').val());
            var order_discount = parseFloat($('input[name="order_discount"]').val());
            if (!order_discount)
                order_discount = 0.00;
            $("#discount").text(order_discount.toFixed(2));

            var shipping_cost = parseFloat($('input[name="shipping_cost"]').val());
            if (!shipping_cost)
                shipping_cost = 0.00;

            item = ++item + '(' + total_qty + ')';
            order_tax = (subtotal - order_discount) * (order_tax / 100);
            var grand_total = (subtotal + order_tax + shipping_cost) - order_discount;
            $('input[name="grand_total"]').val(grand_total.toFixed(2));

            couponDiscount();
            var coupon_discount = parseFloat($('input[name="coupon_discount"]').val());
            if (!coupon_discount)
                coupon_discount = 0.00;
            grand_total -= coupon_discount;

            $('#item').text(item);
            $('input[name="item"]').val($('table.order-list tbody tr:last').index() + 1);
            $('#subtotal').text(subtotal.toFixed(2));
            $('#tax').text(order_tax.toFixed(2));
            $('input[name="order_tax"]').val(order_tax.toFixed(2));
            $('#shipping-cost').text(shipping_cost.toFixed(2));
            $('#grand-total').text(grand_total.toFixed(2));
            $('input[name="grand_total"]').val(grand_total.toFixed(2));
        }

        function hide() {
            $(".card-element").hide();
            $(".card-errors").hide();
            $(".cheque").hide();
            $(".gift-card").hide();
            $('input[name="cheque_no"]').attr('required', false);
        }

        function giftCard() {
            $(".gift-card").show();
            $.ajax({
                url: 'sales/get_gift_card',
                type: "GET",
                dataType: "json",
                success: function (data) {
                    $('#add-payment select[name="gift_card_id_select"]').empty();
                    $.each(data, function (index) {
                        gift_card_amount[data[index]['id']] = data[index]['amount'];
                        gift_card_expense[data[index]['id']] = data[index]['expense'];
                        $('#add-payment select[name="gift_card_id_select"]').append(
                            '<option value="' + data[index]['id'] + '">' + data[index][
                                'card_no'
                            ] + '</option>');
                    });
                    $('.selectpicker').selectpicker('refresh');
                    $('.selectpicker').selectpicker();
                }
            });
            $(".card-element").hide();
            $(".card-errors").hide();
            $(".cheque").hide();
            $('input[name="cheque_no"]').attr('required', false);
        }

        function cheque() {
            $(".cheque").show();
            $('input[name="cheque_no"]').attr('required', true);
            $(".card-element").hide();
            $(".card-errors").hide();
            $(".gift-card").hide();
        }

        function creditCard() {
            $.getScript("public/vendor/stripe/checkout.js");
            $(".card-element").show();
            $(".card-errors").show();
            $(".cheque").hide();
            $(".gift-card").hide();
            $('input[name="cheque_no"]').attr('required', false);
        }

        function deposits() {
            if ($('input[name="paid_amount"]').val() > deposit[$('#customer_id').val()]) {
                alert('Amount exceeds customer deposit! Customer deposit : ' + deposit[$('#customer_id').val()]);
            }
            $('input[name="cheque_no"]').attr('required', false);
            $('#add-payment select[name="gift_card_id_select"]').attr('required', false);
        }

        function cancel(rownumber) {
            while (rownumber >= 0) {
                product_price.pop();
                product_discount.pop();
                tax_rate.pop();
                tax_name.pop();
                tax_method.pop();
                unit_name.pop();
                unit_operator.pop();
                unit_operation_value.pop();
                $('table.order-list tbody tr:last').remove();
                rownumber--;
            }
            $('input[name="shipping_cost"]').val('');
            $('input[name="order_discount"]').val('');
            $('select[name="order_tax_rate_select"]').val(0);
            calculateTotal();
        }

        function confirmCancel() {
            var audio = $("#mysoundclip2")[0];
            audio.play();
            if (confirm("Are you sure want to cancel?")) {
                cancel($('table.order-list tbody tr:last').index());
            }
            return false;
        }

        $(document).on('submit', '.payment-form', function (e) {
            var rownumber = $('table.order-list tbody tr:last').index();
            if (rownumber < 0) {
                alert("Please insert product to order table!")
                e.preventDefault();
            } else if (parseFloat($('input[name="paying_amount"]').val()) < parseFloat($(
                    'input[name="paid_amount"]').val())) {
                alert('Paying amount cannot be bigger than recieved amount');
                e.preventDefault();
            }
            $('input[name="paid_by_id"]').val($('select[name="paid_by_id_select"]').val());
            $('input[name="order_tax_rate"]').val($('select[name="order_tax_rate_select"]').val());

        });

        $('#product-table').DataTable({
            "order": [],
            'pageLength': product_row_number,
            'language': {
                'paginate': {
                    'previous': '<i class="fa fa-angle-left"></i>',
                    'next': '<i class="fa fa-angle-right"></i>'
                }
            },
            dom: 'tp'
        });

    </script>

    <script type="text/javascript">
        function myFunction() {
            setTimeout(showPage, 150);
        }

        function showPage() {
            document.getElementById("loader").style.display = "none";
            document.getElementById("content").style.display = "block";
            $("#lims_productcodeSearch").focus();
        }

        $("div.alert").delay(3000).slideUp(750);
        $('select').selectpicker({
            style: 'btn-link',
        });

    </script>
</body>

</html>
